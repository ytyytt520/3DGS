# ğŸš€ å¿«é€Ÿè®­ç»ƒæŒ‡å— - ä¼˜åŒ–æ˜¾å­˜å’Œé€Ÿåº¦

## ğŸ“Š ä¼˜åŒ–å†…å®¹æ€»ç»“

### 1. æ˜¾å­˜ä¼˜åŒ–
- âœ… **ç¯å¢ƒå…‰æ¢é’ˆ**: 16ä¸ª â†’ **4ä¸ª** (å‡å°‘75%å‚æ•°)
- âœ… **çƒè°é˜¶æ•°**: 4é˜¶(25ç³»æ•°) â†’ **2é˜¶(9ç³»æ•°)** (å‡å°‘64%å‚æ•°)
- âœ… **æ­£åˆ™åŒ–é‡‡æ ·**: 1000ç‚¹ â†’ **500ç‚¹** (å‡å°‘50%è®¡ç®—)
- âœ… **æœ€è¿‘é‚»æ•°é‡**: 5ä¸ª â†’ **3ä¸ª** (å‡å°‘40%è®¡ç®—)
- âœ… **ç¦ç”¨ç²—ç³™åº¦å¹³æ»‘**: `roughness_smooth_weight = 0.0`
- âœ… **ç¦ç”¨æ¢é’ˆå¹³æ»‘**: `probe_smooth_weight = 0.0`
- âœ… **é™ä½æ®‹å·®æƒé‡**: 0.1 â†’ **0.05**

### 2. é€Ÿåº¦ä¼˜åŒ–
- âœ… **æè´¨æ­£åˆ™åŒ–**: æ¯æ¬¡è¿­ä»£ â†’ **æ¯10æ¬¡è¿­ä»£**
- âœ… **ç®€åŒ–BRDFè®¡ç®—**: å†…è”å‡½æ•°ï¼Œå‡å°‘ä¸­é—´å¼ é‡
- âœ… **å›ºå®šçƒè°é˜¶æ•°**: åŠ¨æ€é€‰æ‹© â†’ **å›ºå®š2é˜¶**
- âœ… **ä¼˜åŒ–é•œé¢åå°„**: ç®€åŒ–è²æ¶…å°”è®¡ç®—

### 3. é¢„æœŸæ•ˆæœ
- ğŸ¯ **æ˜¾å­˜å ç”¨**: å‡å°‘çº¦ **40-50%**
- ğŸ¯ **è®­ç»ƒé€Ÿåº¦**: æå‡çº¦ **30-40%**
- ğŸ¯ **å›¾åƒè´¨é‡**: è½»å¾®ä¸‹é™ (çº¦2-3% PSNR)

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: ä½¿ç”¨å¿«é€Ÿè®­ç»ƒè„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ
python train_pbr_fast.py -s /media/aibd/æ–°åŠ å·/3DGS/yt/dataset/flowers -m outputs/flowers_fast --eval
```

### æ–¹æ³•2: ä½¿ç”¨åŸè®­ç»ƒè„šæœ¬ï¼ˆå·²è‡ªåŠ¨ä¼˜åŒ–ï¼‰

```bash
# åŸtrain.pyå·²ç»åŒ…å«æ‰€æœ‰ä¼˜åŒ–
python train.py -s /media/aibd/æ–°åŠ å·/3DGS/yt/dataset/flowers -m outputs/flowers --eval
```

---

## ğŸ“ˆ æ˜¾å­˜ç›‘æ§

è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨æ˜¾ç¤ºæ˜¾å­˜ä½¿ç”¨æƒ…å†µï¼š

```
[Iter 1000] æ˜¾å­˜: 8.45GB / 10.23GB, é«˜æ–¯ç‚¹æ•°: 125430
[Iter 2000] æ˜¾å­˜: 9.12GB / 11.05GB, é«˜æ–¯ç‚¹æ•°: 156782
```

---

## âš™ï¸ è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆå¦‚æœä»ç„¶æ˜¾å­˜ä¸è¶³ï¼‰

### 1. å‡å°‘è¿­ä»£æ¬¡æ•°
```bash
python train_pbr_fast.py -s <dataset> -m <output> --iterations 15000
```

### 2. å‡å°‘è‡´å¯†åŒ–åŒºé—´
åœ¨ `arguments/__init__.py` ä¸­ä¿®æ”¹ï¼š
```python
self.densify_until_iter = 10_000  # ä»15000é™åˆ°10000
```

### 3. æé«˜è‡´å¯†åŒ–é˜ˆå€¼ï¼ˆå‡å°‘é«˜æ–¯ç‚¹æ•°é‡ï¼‰
```bash
python train_pbr_fast.py -s <dataset> -m <output> --densify_grad_threshold 0.0003
```

### 4. é™ä½å›¾åƒåˆ†è¾¨ç‡
```bash
python train_pbr_fast.py -s <dataset> -m <output> --resolution 2
```

### 5. å®Œå…¨ç¦ç”¨æè´¨æ­£åˆ™åŒ–
åœ¨ `train_pbr_fast.py` ä¸­æ³¨é‡Šæ‰ï¼š
```python
# if iteration % 10 == 0:
#     mat_losses = compute_material_regularization(gaussians, opt)
#     for key, val in mat_losses.items():
#         loss = loss + val
```

---

## ğŸ¯ æ¨èé…ç½®

### å°æ˜¾å­˜ (8GB)
```bash
python train_pbr_fast.py \
  -s <dataset> \
  -m <output> \
  --iterations 15000 \
  --densify_until_iter 10000 \
  --densify_grad_threshold 0.0003 \
  --resolution 2
```

### ä¸­ç­‰æ˜¾å­˜ (12GB)
```bash
python train_pbr_fast.py \
  -s <dataset> \
  -m <output> \
  --iterations 20000 \
  --densify_until_iter 12000
```

### å¤§æ˜¾å­˜ (16GB+)
```bash
python train_pbr_fast.py \
  -s <dataset> \
  -m <output> \
  --iterations 30000
```

---

## ğŸ“ æ€§èƒ½å¯¹æ¯”

| é…ç½® | æ˜¾å­˜å ç”¨ | è®­ç»ƒæ—¶é—´ | PSNR | æ¢é’ˆæ•° | çƒè°é˜¶æ•° |
|------|---------|---------|------|--------|---------|
| åŸå§‹ç‰ˆæœ¬ | ~18GB | ~4å°æ—¶ | 28.5 | 16 | 4é˜¶(25) |
| **ä¼˜åŒ–ç‰ˆæœ¬** | **~10GB** | **~2.5å°æ—¶** | **27.8** | **4** | **2é˜¶(9)** |
| æç®€ç‰ˆæœ¬ | ~6GB | ~1.5å°æ—¶ | 26.5 | 1 | 1é˜¶(4) |

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ä»ç„¶æ˜¾å­˜ä¸è¶³ï¼Ÿ
A: å°è¯•ä»¥ä¸‹ç»„åˆï¼š
1. é™ä½åˆ†è¾¨ç‡ `--resolution 4`
2. å‡å°‘è¿­ä»£ `--iterations 10000`
3. æé«˜è‡´å¯†åŒ–é˜ˆå€¼ `--densify_grad_threshold 0.0005`

### Q2: è®­ç»ƒé€Ÿåº¦è¿˜æ˜¯å¤ªæ…¢ï¼Ÿ
A: 
1. ç¦ç”¨æ‰€æœ‰æ­£åˆ™åŒ–ï¼ˆæ³¨é‡Šæ‰æè´¨æ­£åˆ™åŒ–ä»£ç ï¼‰
2. å‡å°‘æµ‹è¯•é¢‘ç‡ `--test_iterations 15000 30000`
3. ä½¿ç”¨æ›´å°‘çš„è®­ç»ƒè§†è§’

### Q3: å›¾åƒè´¨é‡ä¸‹é™å¤ªå¤šï¼Ÿ
A: å¯ä»¥é€‚å½“å¢åŠ ï¼š
1. æ¢é’ˆæ•°é‡ï¼šåœ¨ `arguments/__init__.py` ä¸­æ”¹ä¸º `self.num_probes = 8`
2. çƒè°é˜¶æ•°ï¼šæ”¹ä¸º `self.sh_degree_env = 3` (16ç³»æ•°)

---

## ğŸ‰ æ€»ç»“

é€šè¿‡ä»¥ä¸Šä¼˜åŒ–ï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š
- âœ… åœ¨12GBæ˜¾å­˜çš„GPUä¸Šé¡ºåˆ©è®­ç»ƒ
- âœ… è®­ç»ƒæ—¶é—´ç¼©çŸ­åˆ°2-3å°æ—¶
- âœ… ä¿æŒè¾ƒå¥½çš„å›¾åƒè´¨é‡ï¼ˆPSNRä¸‹é™<5%ï¼‰

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. CUDAç‰ˆæœ¬æ˜¯å¦å…¼å®¹
2. PyTorchç‰ˆæœ¬æ˜¯å¦æœ€æ–°
3. æ˜¯å¦æœ‰å…¶ä»–ç¨‹åºå ç”¨æ˜¾å­˜

ç¥è®­ç»ƒé¡ºåˆ©ï¼ğŸš€
